{
    "LoadBalancerConfiguration": {
        "Name": "gitee-notion-sync-alb",
        "Scheme": "internet-facing",
        "Type": "application",
        "IpAddressType": "ipv4",
        "SecurityGroups": ["${ALB_SECURITY_GROUP_ID}"],
        "Subnets": ["${PUBLIC_SUBNET_1}", "${PUBLIC_SUBNET_2}"]
    },
    "TargetGroupConfiguration": {
        "Name": "gitee-notion-sync-tg",
        "Protocol": "HTTP",
        "Port": 8787,
        "TargetType": "ip",
        "VpcId": "${VPC_ID}",
        "HealthCheckConfiguration": {
            "Protocol": "HTTP",
            "Path": "/health",
            "Port": "traffic-port",
            "HealthyThresholdCount": 2,
            "UnhealthyThresholdCount": 3,
            "Timeout": 5,
            "Interval": 30
        },
        "Attributes": [
            {
                "Key": "deregistration_delay.timeout_seconds",
                "Value": "30"
            },
            {
                "Key": "stickiness.enabled",
                "Value": "false"
            }
        ]
    },
    "ListenerConfiguration": {
        "Port": 443,
        "Protocol": "HTTPS",
        "SslPolicy": "ELBSecurityPolicy-TLS-1-2-2017-01",
        "Certificates": [
            {
                "CertificateArn": "${ACM_CERTIFICATE_ARN}"
            }
        ],
        "DefaultActions": [
            {
                "Type": "forward",
                "TargetGroupArn": "${TARGET_GROUP_ARN}"
            }
        ]
    },
    "HttpToHttpsRedirectListener": {
        "Port": 80,
        "Protocol": "HTTP",
        "DefaultActions": [
            {
                "Type": "redirect",
                "RedirectConfig": {
                    "Protocol": "HTTPS",
                    "Port": "443",
                    "StatusCode": "HTTP_301"
                }
            }
        ]
    }
} 