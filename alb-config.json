{
  "HttpToHttpsRedirectListener": {
    "DefaultActions": [
      {
        "RedirectConfig": {
          "Port": "443",
          "Protocol": "HTTPS",
          "StatusCode": "HTTP_301"
        },
        "Type": "redirect"
      }
    ],
    "Port": 80,
    "Protocol": "HTTP"
  },
  "ListenerConfiguration": {
    "Certificates": [
      {
        "CertificateArn": "${ACM_CERTIFICATE_ARN}"
      }
    ],
    "DefaultActions": [
      {
        "TargetGroupArn": "${TARGET_GROUP_ARN}",
        "Type": "forward"
      }
    ],
    "Port": 443,
    "Protocol": "HTTPS",
    "SslPolicy": "ELBSecurityPolicy-TLS-1-2-2017-01"
  },
  "LoadBalancerConfiguration": {
    "IpAddressType": "ipv4",
    "Name": "gitee-notion-sync-alb",
    "Scheme": "internet-facing",
    "SecurityGroups": [
      "${ALB_SECURITY_GROUP_ID}"
    ],
    "Subnets": [
      "${PUBLIC_SUBNET_1}",
      "${PUBLIC_SUBNET_2}"
    ],
    "Type": "application"
  },
  "TargetGroupConfiguration": {
    "Attributes": [
      {
        "Key": "deregistration_delay.timeout_seconds",
        "Value": "30"
      },
      {
        "Key": "stickiness.enabled",
        "Value": "false"
      }
    ],
    "HealthCheckConfiguration": {
      "HealthyThresholdCount": 2,
      "Interval": 30,
      "Path": "/health",
      "Port": "traffic-port",
      "Protocol": "HTTP",
      "Timeout": 5,
      "UnhealthyThresholdCount": 3
    },
    "Name": "gitee-notion-sync-tg",
    "Port": 8787,
    "Protocol": "HTTP",
    "TargetType": "ip",
    "VpcId": "${VPC_ID}"
  }
}
